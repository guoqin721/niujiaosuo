$(function(){function e(e,o){$(".controller_bar_2").click(function(){f<100?p++:p=e,t(p,o)}),$(".controller_bar_1").click(function(){f>0?p--:p=0,t(p,o)})}function t(e,t){f=e*(100/z),percentPo=f/h,$(".ui-slider-range").css("width",percentPo+"%"),$(".ui-slider-handle").css("left",percentPo+"%"),o(t)}function o(e){for(var t in e)t==i[p]&&($("#customerAge option").removeAttr("selected"),$("#customerAge").val(t),"pep"!==g&"pe"!==g?($("#zj").html(e[t].bz2),$("#qj").html(e[t].total),$("#sg").html(e[t].bz1),$("#xj").html(e[t].total1)):($("#zj").html(e[t].total1),$("#qj").html(.2*e[t].fbz1+2e4),$("#sg").html(e[t].total1),$("#xj").html(e[t].total2)))}function n(e){u.addEventListener("touchstart",function(t){var n=t.targetTouches[0],s=u.offsetLeft;startX=n.pageX,u.addEventListener("touchmove",function(t){var n=t.targetTouches[0];endX=n.pageX;var r=s+(endX-startX);r<0&&(r=0),r>m.offsetWidth-u.offsetWidth&&(r=m.offsetWidth-u.offsetWidth),f=r/m.offsetWidth*100,percentSlide=f/100*h,u.style.left=f+"%",d.style.width=f+"%",p=parseInt(z*percentSlide),o(e)},!1),document.addEventListener("touchend",function(e){},!1)},!1)}function s(e,o){$("#customerAge").on("change",function(){currentValue=$(this).val();for(var n in e)e[n]==currentValue&&(p=n);t(p,o)})}function r(e){var t=$("#customerAge option").clone(!1),o="";$("#customerAge").empty();for(var n in e)o=t.clone(!1),o.val(n),o.html(n),$("#customerAge").append(o)}var a=window.location.href,l=a.split("?")[1].split("&"),c=[],i=[],p=0,f=0,u=$("#spanSlide").get(0),d=$("#sliderDiv").get(0),m=$("#slider").get(0),h=1/((m.offsetWidth-u.offsetWidth)/m.offsetWidth);l.forEach(function(e){e=e.split("=")[1],c.push(decodeURIComponent(e))}),$(".customerSex").html(c[0]),$(".customerSmoke").html(c[1]),$(".customerAge").html(c[3]+"周岁"),$(".guarDetaAges").html(c[2]);var g=c[4],v=c[5],y=parseInt(c[3]),b=parseInt(c[2]);"pep"!==g&"pe"!==g?($(".slideDown").css("display","none"),$(".planbook").css("backgroundColor","#ff8f8f"),$(".tele").css("background","#68bdf2"),$(".footerTip").css("background","#ff8f8f"),$(".guarantee1").css("display","none"),$(".totalPrem").html("总保费"),$(".sgpcbz").html("身故赔偿保证金额"),$(".sgpczje").html("身故赔偿总金额"),$(".xjjzbz").html("现金价值保证金额"),$(".xjjzzje").html("现金价值总金额"),$(".guarDetaCoverage").html((b*v).toFixed(2)),$(".guarantee2 .customerSex").css("display","none")):($(".guarantee2").css("display","none"),$(".guarDetaCoverage").html(1e5)),"pep"==g?($(".companyInfo").html("友邦加裕倍安保加强版"),wxSetTitle("友邦加裕倍安保加强版")):"pe"==g?($(".companyInfo").html("友邦加裕倍安保"),wxSetTitle("友邦加裕倍安保")):"bpp2"==g?($(".companyInfo").html("友邦充裕未来储蓄计划"),wxSetTitle("友邦充裕未来储蓄计划")):"egs"==g?($(".companyInfo").html("保诚隽升储蓄计划"),wxSetTitle("保诚隽升储蓄计划")):($(".companyInfo").html("安盛安进储蓄计划"),wxSetTitle("安盛安进储蓄计划"));var j="",x="",S="";S="女"==c[0]?"F":"M",x="吸烟"==c[1]?"Y":"N",j=S+x;var w=parseInt(c[3])+1,z=0;$.ajax({url:"http://api.fundusd.com/v1/insurance/plans/"+g+"?period="+b+"&age="+y+"&type="+j+"&coverage="+v,type:"GET",success:function(t){t=(new Base64).decode(t.substring(2)),t=JSON.parse(t);for(var a in t)i.push(a),i[0]==a&&(w=i[0]);z=i.length-1,"pep"!==g&"pe"!==g?$(".guarDetaPremium").html(v):$(".guarDetaPremium").html(t[w].total),c[3]<18?$(".child").css("display","block"):$(".child").css("display","none"),"pep"==g?$(".pep").css("display","block"):$(".pep").css("display","none"),r(t),o(t),e(z,t),n(t),s(i,t)},error:function(){console.log("error")}})});