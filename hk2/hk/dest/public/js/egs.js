$(function(){function e(){$.ajax({url:"http://api.fundusd.com/v1/insurance/plans/"+n+"?coverage="+a+"&period="+r+"&type="+i+"&age="+u,type:"GET",success:function(e){"pep"!==n&"pe"!==n?$("#premium").html(a):$("#premium").html(e[parseInt(u)+1].money)},error:function(){console.log("error")}})}function o(e){var o="";$("#customerAge").empty();for(var t=0;t<=e;t++)o=c.clone(!1),o.val(t),o.html(t),$("#customerAge").append(o);$("#customerAge option").eq(20).attr("selected","selected")}var t=window.location.href,n=t.split("?")[1].split("=")[1].split("&")[0],i="FN",a=$(".radioMoney").val();$("#premium").html(a);var r=$(".radioYears:checked").val(),c=$("#customerAge option").clone(!1),s=70;o(s);var u=$("#customerAge").val();e(),$("#customerAge").on("change",function(){u=$("#customerAge option:selected").val(),console.log("333",u)}),$(".radioMoney").on("change",function(){if((a=$(".radioMoney").val())<2e3){var e=waiting("金额不能少于2000");setTimeout(function(){e()},3e3)}if(a>1e7){var e=waiting("金额应<=10000000");setTimeout(function(){e()},3e3)}if(isNaN(a)){var e=waiting("请输入有效数字");setTimeout(function(){e()},3e3)}a=parseInt(a).toFixed(2),$(this).val(a),$("#premium").html(a)}),$(".radioYears").on("change",function(){r=$(".radioYears:checked").val(),s=1==r?75:5==r?70:65,o(s),u=$("#customerAge option:selected").val(),e()}),$(".doPlan").click(function(e){if(a<2e3||isNaN(a)||a>1e7){var o=waiting("应为2000~10000000数字");setTimeout(function(){o()},3e3)}else window.location.href="planbook.html?customerSex="+i+"&customerSmoke=无关&customerYears="+r+"&customerAge="+u+"&insurance="+n+"&coverage="+a})});